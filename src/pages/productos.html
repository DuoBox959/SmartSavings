<!DOCTYPE html>
<html lang="es">
  <head>
    <!-- Definimos el est√°ndar HTML5 -->
    <meta charset="UTF-8" />
    <!-- Configuraci√≥n para dise√±o responsivo -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- T√≠tulo de la p√°gina que aparece en la pesta√±a del navegador -->
    <title>Gesti√≥n de Productos</title>

    <!-- Vinculaci√≥n de archivos CSS -->
    <link rel="stylesheet" href="../style/producto.css" />

    <!-- Librer√≠as y scripts necesarios -->
    <!-- jQuery: Facilita manipulaci√≥n del DOM y AJAX -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables: Funcionalidades avanzadas para tablas -->
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <!-- PouchDB: Manejo de bases de datos locales en el navegador -->
    <script src="../libs/pouchdb-9.0.0.min.js"></script>
    <!-- Funciones espec√≠ficas para la gesti√≥n de productos -->
    <script src="../functions/productos.js"></script>
    <!-- Validaciones personalizadas para los formularios -->
    <script src="../valid/validaciones.js"></script>
  </head>
  <body>
    <!-- üîî Aviso Importante -->
    <div
      id="aviso"
      style="
        background-color: #ffeeba;
        border: 1px solid #f5c6cb;
        padding: 10px;
        margin: 10px;
        border-radius: 5px;
      "
    >
      <strong>Aviso:</strong> La base de datos es p√∫blica y los datos ingresados
      pueden estar desactualizados o no ser exactos.
    </div>

    <!-- üè∑Ô∏è Encabezado Principal -->
    <h1>Gesti√≥n de Productos</h1>
    <!-- Bot√≥n para abrir el formulario de agregar un producto -->
    <button onclick="mostrarFormularioAgregar()">Agregar Producto</button>

    <!-- üìä Tabla Din√°mica -->
    <table id="productosTable" class="display" style="width: 100%">
      <thead>
        <tr>
          <!-- Encabezados de las columnas -->
          <th>ID</th>
          <th>Producto</th>
          <th>Marca</th>
          <th>Precio Unidad</th>
          <th>Precio Lote</th>
          <th>Peso</th>
          <!-- Nuevo campo -->
          <th>√öltima Modificaci√≥n</th>
          <th>Supermercado</th>
          <th>Ubicaci√≥n</th>
          <th>Acciones</th>
          <!-- Para editar o eliminar productos -->
        </tr>
      </thead>
      <!-- Cuerpo din√°mico de la tabla (rellenado mediante JavaScript) -->
      <tbody id="productosBody"></tbody>
    </table>

    <!-- ‚úçÔ∏è Formulario para Agregar o Editar Productos -->
    <div id="formularioProducto" style="display: none">
      <h2 id="formTitulo">Agregar Producto</h2>
      <!-- Campo oculto para guardar el ID del producto al editar -->
      <input type="hidden" id="productoID" />

      <!-- Campos del formulario -->
      <label for="nombreProducto">Nombre del Producto:</label>
      <input type="text" id="nombreProducto" /><br />

      <label for="marcaProducto">Marca:</label>
      <input type="text" id="marcaProducto" /><br />

      <label for="precioUnidad">Precio Unidad:</label>
      <input type="number" id="precioUnidad" step="0.01" min="0" /><br />

      <label for="precioLote">Precio Lote:</label>
      <input type="number" id="precioLote" step="0.01" min="0" /><br />

      <label for="pesoProducto">Peso:</label>
      <input
        type="number"
        id="pesoProducto"
        step="0.01"
        min="0"
        placeholder="Ejemplo: 1.5"
      /><br />

      <label for="unidadPeso">Unidad de Peso:</label>
      <select id="unidadPeso">
        <option value="kg">Kilogramos (kg)</option>
        <option value="g">Gramos (g)</option>
        <option value="l">Litros (l)</option></select
      ><br />

      <label for="nombreSupermercado">Supermercado:</label>
      <input type="text" id="nombreSupermercado" /><br />

      <label for="ubicacionSupermercado">Ubicaci√≥n:</label>
      <input type="text" id="ubicacionSupermercado" /><br />

      <!-- Botones de acci√≥n -->
      <div id="botonesFormulario">
        <button onclick="guardarCambiosDesdeFormulario()">Guardar</button>
        <button onclick="cerrarFormulario()">Cancelar</button>
      </div>
    </div>

    <!-- üîô Bot√≥n para regresar -->
    <button class="back-button" onclick="volverAtras()">Volver Atr√°s</button>
  </body>
</html>
