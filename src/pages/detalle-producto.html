<!DOCTYPE html>
<html lang="es">
<head>
  <!-- üåê Meta b√°sicos -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detalle del Producto</title>

  <!-- üé® Estilos -->
  <link rel="stylesheet" href="../style/global/header.css" />
  <link rel="stylesheet" href="../style/producto.css" />
  <link rel="stylesheet" href="../style/global/footer.css" />
  <link rel="stylesheet" href="../style/detalle-producto.css" />
  <link rel="stylesheet" href="../style/opinione.css" />
  <link rel="stylesheet" href="../style/global/nav.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body>
  <noscript>Para usar esta p√°gina necesitas habilitar JavaScript.</noscript>

  <!-- ‚úÖ Header inyectado por JS -->
  <div id="header"></div>

  <!-- Barra superior (por si luego a√±ades m√©tricas, breadcrumbs, etc.) -->
  <section class="acciones-superiores">
    <strong></strong>
  </section>

  <!-- üßæ Detalle del producto -->
  <main id="detalle-producto" aria-labelledby="titulo-detalle">
    <figure class="producto-imagen">
      <img id="producto-imagen" src="../assets/img/default.webp" alt="Imagen del producto" />
    </figure>

    <section class="producto-info">
      <!-- Acciones en el detalle -->
      <div class="acciones-producto-superior">
        <button id="btn-editar-detalle" class="btn-editar" type="button">‚úèÔ∏è Editar</button>
        <button id="btn-eliminar-detalle" class="btn-eliminar" type="button">üóëÔ∏è Eliminar</button>
      </div>

      <h1 id="titulo-detalle" class="producto-titulo">Nombre del producto</h1>

      <!-- üì¶ Informaci√≥n general -->
      <p id="producto-marca">Marca:</p>
      <p id="producto-tipo">Tipo:</p>
      <p id="producto-subtipo">Subtipo:</p>
      <p id="producto-utilidad">Descripci√≥n:</p>
      <p id="producto-ingredientes">Ingredientes:</p>

      <!-- üí∞ Precios -->
      <p id="producto-precio">Precio:</p>
      <p id="producto-precio-unidad">Precio por unidad/lote:</p>
      <p id="producto-unidad-lote">Unidad/Lote:</p>
      <p id="producto-historico">Precio hist√≥rico:</p>

      <!-- ‚öñÔ∏è Peso y estado -->
      <p id="producto-peso">Peso:</p>
      <p id="producto-estado">Estado:</p>

      <!-- üõí Supermercado -->
      <p id="producto-supermercado">Supermercado:</p>
      <p id="producto-ubicacion">Ubicaci√≥n del supermercado:</p>
      <p id="producto-pais-super">Pa√≠s del supermercado:</p>
      <p id="producto-ciudad-super">Ciudad del supermercado:</p>

      <!-- üè≠ Proveedor -->
      <p id="producto-proveedor">Proveedor:</p>
      <p id="producto-pais-proveedor">Pa√≠s del proveedor:</p>
    </section>
  </main>

  <!-- ‚≠ê Opiniones (plegable) -->
  <details id="opiniones-plegables" class="opiniones-plegables">
    <summary class="opiniones-summary">
      <h2>Opiniones de Clientes</h2>
      <span class="toggle-icon">‚ñº</span>
    </summary>

    <div class="reviews-content">
      <div class="reviews-container">
        <!-- Ejemplo est√°tico (lo puedes quitar cuando las cargues desde la API) -->
        <div class="opinion-item">
          <h3 class="opinion-title">Excelente producto</h3>
          <p class="opinion-rating">‚≠ê ‚≠ê ‚≠ê ‚≠ê ‚≠ê</p>
          <p class="opinion-comment">"Me encant√≥ este producto, super√≥ mis expectativas."</p>
          <small class="opinion-author-date">‚Äî Juan P√©rez, 15 de julio de 2025</small>
        </div>
      </div>

      <div class="add-review-form">
        <h3>Deja tu opini√≥n</h3>
        <form id="form-nueva-opinion">
          <label for="review-title">T√≠tulo:</label>
          <input type="text" id="review-title" placeholder="Ej. ¬°Me encanta!" required>

          <label for="review-rating">Calificaci√≥n:</label>
          <select id="review-rating" required>
            <option value="">Selecciona una calificaci√≥n</option>
            <option value="5">‚≠ê ‚≠ê ‚≠ê ‚≠ê ‚≠ê (Excelente)</option>
            <option value="4">‚≠ê ‚≠ê ‚≠ê ‚≠ê (Muy bueno)</option>
            <option value="3">‚≠ê ‚≠ê ‚≠ê (Bueno)</option>
            <option value="2">‚≠ê ‚≠ê (Regular)</option>
            <option value="1">‚≠ê (Malo)</option>
          </select>

          <label for="review-comment">Comentario:</label>
          <textarea id="review-comment" rows="4" placeholder="Escribe tu opini√≥n aqu√≠..." required></textarea>

          <button type="submit">Enviar Opini√≥n</button>
        </form>
      </div>
    </div>
  </details>

  <!-- üîô Volver -->
  <div class="volver-atras">
    <button class="volver-btn" id="btn-volver-atras" type="button">Volver</button>
  </div>

  <!-- ‚úèÔ∏è Modal: Editar producto -->
  <div id="modal-editar" class="modal" role="dialog" aria-modal="true" aria-labelledby="edit-title" aria-hidden="true">
    <div class="modal-content">
      <span class="close" id="close-modal-span" aria-label="Cerrar">&times;</span>

      <form id="form-editar-producto">
        <h2 id="edit-title">Editar Producto</h2>

        <!-- Obligatorios -->
        <label for="edit-nombre">Nombre del producto: *</label>
        <input type="text" id="edit-nombre" required />

        <label for="edit-tipo-select">Tipo del producto: *</label>
        <select id="edit-tipo-select" required>
          <option value="">Selecciona un tipo</option>
          <option value="nuevo">Otro (escribir nuevo)</option>
        </select>
        <input type="text" id="edit-tipo-nuevo" placeholder="Nuevo tipo" style="display:none;" />

        <label for="edit-precio">Precio actual (‚Ç¨): *</label>
        <input type="number" id="edit-precio" step="0.01" min="0" inputmode="decimal" required />

        <label for="edit-peso">Peso: *</label>
        <input type="number" id="edit-peso" step="0.01" min="0" inputmode="decimal" required />

        <label for="edit-unidadPeso">Unidad de Peso: *</label>
        <select id="edit-unidadPeso" required>
          <option value="kg">Kilogramos (kg)</option>
          <option value="g">Gramos (g)</option>
          <option value="l">Litros (l)</option>
          <option value="ml">Mililitros (ml)</option>
        </select>

        <label for="edit-supermercado-select">Supermercado: *</label>
        <select id="edit-supermercado-select" required>
          <option value="">Selecciona un supermercado</option>
          <option value="nuevo">Otro (escribir nuevo)</option>
        </select>
        <input type="text" id="edit-supermercado-nuevo" placeholder="Nuevo supermercado" style="display:none;" />

        <label for="edit-estado">Estado: *</label>
        <select id="edit-estado" required>
          <option value="En stock">En stock</option>
          <option value="Sin stock">Sin stock</option>
        </select>

        <!-- Ocultos -->
        <input type="hidden" id="edit-producto-id" />
        <input type="hidden" id="edit-fecha-subida" />
        <input type="hidden" id="edit-usuario" />
        <input type="hidden" id="edit-fecha-actualizacion" />

        <!-- Opcionales -->
        <details>
          <summary>Ver m√°s campos para tu producto</summary>

          <label for="edit-imagen">Imagen del producto:</label>
          <input type="file" id="edit-imagen" name="Imagen" accept="image/*" />

          <label for="edit-marca-select">Marca:</label>
          <select id="edit-marca-select">
            <option value="">Selecciona una marca</option>
            <option value="nuevo">Otra (escribir nueva)</option>
          </select>
          <input type="text" id="edit-marca-nuevo" style="display:none;" />

          <!-- Ubicaci√≥n din√°mica (si se crea supermercado nuevo) -->
          <div id="selector-ubicacion-dinamico" style="display:none; margin-top:1.5em; grid-column: span 2;">
            <fieldset class="fieldset-ubicacion">
              <legend class="legend-ubicacion">üìç Ubicaci√≥n del supermercado</legend>

              <div class="grid-ubicacion">
                <div class="form-row">
                  <label for="edit-pais-existente">Pa√≠s:</label>
                  <select id="edit-pais-existente"></select>
                  <input type="text" id="edit-nuevo-pais" placeholder="Nuevo pa√≠s" style="display:none;" />
                </div>

                <div class="form-row">
                  <label for="edit-ciudad-existente">Ciudad:</label>
                  <select id="edit-ciudad-existente" style="display:none;"></select>
                  <input type="text" id="edit-nueva-ciudad" placeholder="Nueva ciudad" style="display:none;" />
                </div>

                <div class="form-row full-width">
                  <label for="edit-ubicacion-existente">Ubicaci√≥n existente:</label>
                  <select id="edit-ubicacion-existente" style="display:none;"></select>
                  <label for="edit-nueva-ubicacion" id="label-edit-nueva-ubicacion">Ubicaci√≥n nueva (direcci√≥n o zona):</label>
                  <input type="text" id="edit-nueva-ubicacion" placeholder="Ej: Calle Mayor 45" style="display:none;" />
                </div>
              </div>
            </fieldset>
          </div>

          <label for="edit-proveedor-select">Proveedor:</label>
          <select id="edit-proveedor-select">
            <option value="">Selecciona un proveedor</option>
            <option value="nuevo">Otro (escribir nuevo)</option>
          </select>
          <input type="text" id="edit-proveedor-nuevo" style="display:none;" />

          <label for="edit-pais-proveedor">Pa√≠s del proveedor:</label>
          <input type="text" id="edit-pais-proveedor" />

          <label for="edit-subtipo-select">Subtipo:</label>
          <select id="edit-subtipo-select">
            <option value="">Selecciona un subtipo</option>
            <option value="nuevo">Otro (escribir nuevo)</option>
          </select>
          <input type="text" id="edit-subtipo-nuevo" style="display:none;" />

          <label for="edit-unidadLote">Unidad/Lote:</label>
          <input type="number" id="edit-unidadLote" min="0" inputmode="numeric" />

          <label for="edit-precioPorUnidad">Precio por unidad/lote (‚Ç¨):</label>
          <input type="number" id="edit-precioPorUnidad" step="0.01" min="0" inputmode="decimal" />

          <label for="edit-precioHistorico">Precio Hist√≥rico:</label>
          <textarea id="edit-precioHistorico" rows="3" placeholder="Ejemplo: 10, 2023, 12, 2024"></textarea>

          <label for="edit-utilidad">Descripci√≥n del producto (Utilidad):</label>
          <input type="text" id="edit-utilidad" placeholder="Ej. Bebida refrescante y energizante" />

          <label for="edit-ingredientes">Ingredientes (separados por coma):</label>
          <input type="text" id="edit-ingredientes" placeholder="Ej: agua, az√∫car, gas carb√≥nico" />
        </details>

        <!-- Acciones modal -->
        <div class="acciones-modal">
          <button type="button" id="btn-guardar-cambios">Guardar Cambios</button>
          <button type="button" class="btn-cerrar" id="btn-cerrar-formulario">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ‚úÖ Footer inyectado por JS -->
  <div id="footer"></div>

  <!-- üìö Librer√≠as -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- üß† L√≥gica de esta vista -->
  <script type="module" src="../functions/detalle-producto.js"></script>
</body>
</html>
