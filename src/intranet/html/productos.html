<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Productos</title>

    <!-- Vinculaci√≥n de archivos CSS -->
    <link rel="stylesheet" href="../css/producto.css">

    <!-- Librer√≠as y scripts necesarios -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="../../libs/pouchdb-9.0.0.min.js"></script>
    <script type="module" src="../js/productos.js"></script>
    <script src="../../valid/validaciones.js"></script>
</head>

<body>
    <!-- üîî Aviso Importante -->
    <div id="aviso" style="
        background-color: #ffeeba;
        border: 1px solid #f5c6cb;
        padding: 10px;
        margin: 10px;
        border-radius: 5px;">
      <strong>Aviso:</strong> La base de datos es p√∫blica y los datos ingresados pueden estar desactualizados o no ser exactos.
    </div>

    <!-- üè∑Ô∏è Encabezado Principal -->
    <h1>Gesti√≥n de Productos</h1>
    
    <!-- Bot√≥n para abrir el formulario de agregar un producto -->
    <button onclick="mostrarFormularioAgregar()">Agregar Producto</button>

    <!-- üìä Tabla Din√°mica -->
    <table id="productosTable" class="display" style="width: 100%">
      <thead>
        <tr>
          <th>ID</th>
          <th>Producto</th>
          <th>Marca</th>
          <th>Precio Unidad</th>
          <th>Precio Lote</th>
          <th>Peso</th>
          <th>√öltima Modificaci√≥n</th>
          <th>Supermercado</th>
          <th>Ubicaci√≥n</th>
          <th>Historial del Producto</th>
          <th>Biograf√≠a del Producto</th>
          <th>Imagen</th>
          <th>Acciones</th>
        </tr>
      </thead>
      
      <tbody id="productosBody"></tbody>
    </table>

    <!-- ‚úçÔ∏è Formulario para Agregar o Editar Productos -->
    <div id="formularioProducto" style="display: none">
      <h2 id="formTitulo">Agregar Producto</h2>
      <input type="hidden" id="productoID" />

      <!-- Campos del formulario -->
      <label for="nombreProducto">Nombre del Producto:</label>
      <input type="text" id="nombreProducto" /><br />

      <label for="marcaProducto">Marca:</label>
      <input type="text" id="marcaProducto" /><br />

      <label for="precioUnidad">Precio Unidad:</label>
      <input type="number" id="precioUnidad" step="0.01" min="0" /><br />

      <label for="precioLote">Precio Lote:</label>
      <input type="number" id="precioLote" step="0.01" min="0" /><br />

      <label for="pesoProducto">Peso:</label>
      <input type="number" id="pesoProducto" step="0.01" min="0" placeholder="Ejemplo: 1.5" /><br />

      <label for="unidadPeso">Unidad de Peso:</label>
      <select id="unidadPeso">
        <option value="kg">Kilogramos (kg)</option>
        <option value="g">Gramos (g)</option>
        <option value="l">Litros (l)</option>
      </select><br />

      <label for="nombreSupermercado">Supermercado:</label>
      <input type="text" id="nombreSupermercado" /><br />

      <label for="ubicacionSupermercado">Ubicaci√≥n:</label>
      <input type="text" id="ubicacionSupermercado" /><br />

      <label for="imgProducto">Imagen del Producto:</label>
      <input type="file" id="imgProducto" accept="image/*" /><br />

      <label for="descripcionProducto">Descripci√≥n:</label>
      <textarea id="descripcionProducto" rows="3" placeholder="Ejemplo: Contiene gluten, sin lactosa..."></textarea><br />

      <div id="botonesFormulario">
          <button onclick="guardarCambiosDesdeFormulario()">Guardar</button>
          <button onclick="cerrarFormulario()">Cancelar</button>
      </div>

    <!-- üìù Secci√≥n para la Biograf√≠a del Producto -->
    <div id="formularioBiografia" style="display: none; margin-top: 20px;">
      <h3>Agregar Biograf√≠a del Producto (Edici√≥n Manual)</h3>

      <label for="anioBiografia">A√±o:</label>
      <input type="number" id="anioBiografia" min="1900" max="2100"><br />

      <label for="mesBiografia">Mes:</label>
      <select id="mesBiografia">
        <option value="Enero">Enero</option>
        <option value="Febrero">Febrero</option>
        <option value="Marzo">Marzo</option>
        <option value="Abril">Abril</option>
        <option value="Mayo">Mayo</option>
        <option value="Junio">Junio</option>
        <option value="Julio">Julio</option>
        <option value="Agosto">Agosto</option>
        <option value="Septiembre">Septiembre</option>
        <option value="Octubre">Octubre</option>
        <option value="Noviembre">Noviembre</option>
        <option value="Diciembre">Diciembre</option>
      </select><br />

      <label for="precioBiografia">Precio Unidad:</label>
      <input type="number" id="precioBiografia" step="0.01"><br />

      <label for="pesoBiografia">Peso:</label>
      <input type="number" id="pesoBiografia" step="0.01"><br />

      <button onclick="agregarBiografiaProducto()">A√±adir al Historial Manual</button>
    </div>

    <!-- üîô Bot√≥n para regresar -->
    <button class="back-button" onclick="volverAtras()">Volver Atr√°s</button>
</body>
</html>
